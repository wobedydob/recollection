import{j as X,H as Y,I as ee,L as se,r as n,k as r,J as T,c as u,s as m,p as e,o as d,a as s,t as a,v as $,B as j,C as te,D as N,K as V,q as E,G as z,d as B,b as ae,w as oe,e as ne,_ as le}from"./CdnJ470i.js";const ie={key:0,class:"profile-page"},re={class:"profile-card"},ue={class:"profile-header"},de={class:"avatar"},ce={class:"profile-info"},pe={class:"profile-name"},me={class:"profile-email"},ve={class:"profile-member"},we={key:0,class:"success-message"},fe={key:1,class:"error-message"},he={class:"form-group"},ge={class:"form-group"},_e=["value"],be=["disabled"],ye={key:0,class:"success-message"},ke={key:1,class:"error-message"},Pe={class:"form-group"},Ce={class:"password-input-wrapper"},xe=["type"],Me={class:"form-group"},qe={class:"password-input-wrapper"},Se=["type"],We={key:0,class:"strength-section"},je={class:"strength-bar"},Ne={class:"password-requirements"},ze={class:"requirement-icon"},Be={class:"requirement-icon"},Le={class:"requirement-icon"},Ve={class:"form-group"},De={class:"password-input-wrapper"},Ue=["type"],Te={key:0,class:"match-indicator match"},$e={key:1,class:"match-indicator no-match"},Ee={key:0,class:"match-message no-match"},Ae={key:1,class:"match-message match"},He=["disabled"],Ie={class:"profile-actions"},Je=X({__name:"profile",setup(Re){const{user:c,isLoggedIn:A,updateProfile:H,logout:I}=Y(),D=ee(),J=se().public.apiBase,w=n(""),y=n(!1),f=n(""),h=n(""),g=n(""),l=n(""),p=n(""),k=n(!1),_=n(""),v=n(""),P=n(!1),C=n(!1),x=n(!1),M=r(()=>l.value.length>=6),q=r(()=>/\d/.test(l.value)),S=r(()=>/[!@#$%^&*(),.?":{}|<>_\-+=\[\]\\\/`~]/.test(l.value)),W=r(()=>p.value.length>0&&l.value===p.value),L=r(()=>p.value.length>0&&l.value!==p.value),b=r(()=>{let o=0;return M.value&&o++,q.value&&o++,S.value&&o++,o}),R=r(()=>l.value.length===0?"":b.value<=1?"Zwak":b.value===2?"Gemiddeld":"Sterk"),U=r(()=>b.value<=1?"#e57373":b.value===2?"#ffb74d":"#81c784"),G=r(()=>M.value&&q.value&&S.value);T(A,o=>{o||D.push("/login")},{immediate:!0}),T(c,o=>{o&&(w.value=o.name)},{immediate:!0});async function O(){f.value="",h.value="",y.value=!0;try{const o=await H({name:w.value});o.success?(f.value="Profiel succesvol bijgewerkt!",setTimeout(()=>f.value="",3e3)):h.value=o.error||"Profiel bijwerken mislukt"}catch{h.value="Er ging iets mis"}finally{y.value=!1}}async function K(){await I(),D.push("/login")}async function Z(){if(_.value="",v.value="",!G.value){v.value="Nieuw wachtwoord voldoet niet aan de eisen";return}if(!W.value){v.value="Wachtwoorden komen niet overeen";return}k.value=!0;try{await $fetch(`${J}/auth/password`,{method:"PUT",body:{currentPassword:g.value,newPassword:l.value},credentials:"include"}),_.value="Wachtwoord succesvol gewijzigd!",g.value="",l.value="",p.value="",setTimeout(()=>_.value="",3e3)}catch(o){v.value=o.data?.message||"Wachtwoord wijzigen mislukt"}finally{k.value=!1}}const F=r(()=>c.value?new Date(c.value.createdAt).toLocaleDateString("nl-NL",{month:"long",year:"numeric"}):"");return(o,t)=>{const Q=ne;return e(c)?(d(),u("div",ie,[s("div",re,[s("div",ue,[s("div",de,a(e(c).name.charAt(0).toUpperCase()),1),s("div",ce,[s("h1",pe,a(e(c).name),1),s("p",me,a(e(c).email),1),s("p",ve,"Lid sinds "+a(e(F)),1)])]),s("form",{onSubmit:$(O,["prevent"]),class:"profile-form"},[t[10]||(t[10]=s("h2",{class:"section-title"},"Profiel Bewerken",-1)),e(f)?(d(),u("div",we,a(e(f)),1)):m("",!0),e(h)?(d(),u("div",fe,a(e(h)),1)):m("",!0),s("div",he,[t[7]||(t[7]=s("label",{class:"label",for:"name"},"Weergavenaam",-1)),j(s("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=i=>N(w)?w.value=i:null),type:"text",class:"input",placeholder:"Je naam",required:""},null,512),[[te,e(w)]])]),s("div",ge,[t[8]||(t[8]=s("label",{class:"label",for:"email"},"E-mail",-1)),s("input",{id:"email",value:e(c).email,type:"email",class:"input",disabled:""},null,8,_e),t[9]||(t[9]=s("p",{class:"input-hint"},"E-mail kan niet worden gewijzigd",-1))]),s("button",{type:"submit",class:"save-btn",disabled:e(y)},a(e(y)?"Opslaan...":"Wijzigingen Opslaan"),9,be)],32),s("form",{onSubmit:$(Z,["prevent"]),class:"password-form"},[t[17]||(t[17]=s("h2",{class:"section-title"},"Wachtwoord Wijzigen",-1)),e(_)?(d(),u("div",ye,a(e(_)),1)):m("",!0),e(v)?(d(),u("div",ke,a(e(v)),1)):m("",!0),s("div",Pe,[t[11]||(t[11]=s("label",{class:"label",for:"currentPassword"},"Huidig wachtwoord",-1)),s("div",Ce,[j(s("input",{id:"currentPassword","onUpdate:modelValue":t[1]||(t[1]=i=>N(g)?g.value=i:null),type:e(P)?"text":"password",class:"input password-input",placeholder:"Je huidige wachtwoord",required:""},null,8,xe),[[V,e(g)]]),s("button",{type:"button",class:"toggle-password",onClick:t[2]||(t[2]=i=>P.value=!e(P))},a(e(P)?"ðŸ™ˆ":"ðŸ‘ï¸"),1)])]),s("div",Me,[t[15]||(t[15]=s("label",{class:"label",for:"newPassword"},"Nieuw wachtwoord",-1)),s("div",qe,[j(s("input",{id:"newPassword","onUpdate:modelValue":t[3]||(t[3]=i=>N(l)?l.value=i:null),type:e(C)?"text":"password",class:"input password-input",placeholder:"Maak een sterk wachtwoord",required:""},null,8,Se),[[V,e(l)]]),s("button",{type:"button",class:"toggle-password",onClick:t[4]||(t[4]=i=>C.value=!e(C))},a(e(C)?"ðŸ™ˆ":"ðŸ‘ï¸"),1)]),e(l).length>0?(d(),u("div",We,[s("div",je,[s("div",{class:"strength-fill",style:E({width:e(b)/3*100+"%",backgroundColor:e(U)})},null,4)]),s("span",{class:"strength-label",style:E({color:e(U)})},a(e(R)),5)])):m("",!0),s("div",Ne,[s("div",{class:z(["requirement",{met:e(M)}])},[s("span",ze,a(e(M)?"âœ“":"â—‹"),1),t[12]||(t[12]=B(" Minimaal 6 tekens ",-1))],2),s("div",{class:z(["requirement",{met:e(q)}])},[s("span",Be,a(e(q)?"âœ“":"â—‹"),1),t[13]||(t[13]=B(" Minimaal 1 cijfer ",-1))],2),s("div",{class:z(["requirement",{met:e(S)}])},[s("span",Le,a(e(S)?"âœ“":"â—‹"),1),t[14]||(t[14]=B(" Minimaal 1 speciaal teken ",-1))],2)])]),s("div",Ve,[t[16]||(t[16]=s("label",{class:"label",for:"confirmPassword"},"Bevestig nieuw wachtwoord",-1)),s("div",De,[j(s("input",{id:"confirmPassword","onUpdate:modelValue":t[5]||(t[5]=i=>N(p)?p.value=i:null),type:e(x)?"text":"password",class:z(["input password-input",{match:e(W),"no-match":e(L)}]),placeholder:"Herhaal nieuw wachtwoord",required:""},null,10,Ue),[[V,e(p)]]),s("button",{type:"button",class:"toggle-password",onClick:t[6]||(t[6]=i=>x.value=!e(x))},a(e(x)?"ðŸ™ˆ":"ðŸ‘ï¸"),1),e(W)?(d(),u("span",Te,"âœ“")):e(L)?(d(),u("span",$e,"âœ—")):m("",!0)]),e(L)?(d(),u("p",Ee,"Wachtwoorden komen niet overeen")):e(W)?(d(),u("p",Ae,"Wachtwoorden komen overeen")):m("",!0)]),s("button",{type:"submit",class:"save-btn",disabled:e(k)},a(e(k)?"Wijzigen...":"Wachtwoord Wijzigen"),9,He)],32),s("div",Ie,[ae(Q,{to:"/",class:"back-link"},{default:oe(()=>[...t[18]||(t[18]=[B("Terug naar Memory Box",-1)])]),_:1}),s("button",{class:"logout-btn",onClick:K},"Uitloggen")])])])):m("",!0)}}}),Ke=le(Je,[["__scopeId","data-v-0986a630"]]);export{Ke as default};
