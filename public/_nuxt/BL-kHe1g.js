import{j as G,r as k,k as h,l as oe,m as ke,c as l,o as n,a as e,b as w,T as ae,w as I,F as S,n as D,p as s,q as F,s as b,d as x,t as p,v as E,x as N,_ as z,y as le,z as V,A as K,B as P,C as q,D as R,E as X,G as Y,H as ye,I as $e,J as Ce}from"./CdnJ470i.js";const Te={class:"selected-tags"},je={key:0,class:"tag-emoji"},we=["onClick"],xe={class:"tag-actions"},Ie=["disabled"],Me={key:0,class:"dropdown"},Ve=["onClick"],he={key:0,class:"tag-emoji"},Se=G({__name:"TagSelector",props:{modelValue:{},tags:{}},emits:["update:modelValue","create-tag","manage-tags"],setup(y,{emit:C}){const v=y,d=C,i=k(!1),u=k(),g=h(()=>v.tags.filter(o=>!v.modelValue.includes(o.id))),T=h(()=>v.tags.filter(o=>v.modelValue.includes(o.id)));function $(o){v.modelValue.includes(o)?d("update:modelValue",v.modelValue.filter(c=>c!==o)):d("update:modelValue",[...v.modelValue,o])}function r(o){d("update:modelValue",v.modelValue.filter(c=>c!==o))}function t(o){u.value&&!u.value.contains(o.target)&&(i.value=!1)}return oe(()=>{document.addEventListener("click",t)}),ke(()=>{document.removeEventListener("click",t)}),(o,c)=>(n(),l("div",{class:"tag-selector",ref_key:"dropdownRef",ref:u},[e("div",Te,[w(ae,{name:"tag"},{default:I(()=>[(n(!0),l(S,null,D(s(T),f=>(n(),l("span",{key:f.id,class:"tag-pill",style:F({backgroundColor:f.color})},[f.emoji?(n(),l("span",je,p(f.emoji),1)):b("",!0),x(" "+p(f.name)+" ",1),e("button",{type:"button",class:"tag-remove",onClick:H=>r(f.id)},"Ã—",8,we)],4))),128))]),_:1}),e("div",xe,[e("button",{type:"button",class:"dropdown-toggle",onClick:c[0]||(c[0]=E(f=>i.value=!s(i),["stop"])),disabled:s(g).length===0},[...c[3]||(c[3]=[e("span",{class:"dropdown-icon"},"â–¼",-1),x(" Kies tag ",-1)])],8,Ie),e("button",{type:"button",class:"add-tag-btn",onClick:c[1]||(c[1]=f=>d("create-tag")),title:"Nieuwe tag maken"}," + "),w(N,{name:"manage-btn"},{default:I(()=>[v.tags.length?(n(),l("button",{key:0,type:"button",class:"manage-tags-btn",onClick:c[2]||(c[2]=f=>d("manage-tags")),title:"Tags beheren"}," âš™ ")):b("",!0)]),_:1})])]),w(N,{name:"dropdown"},{default:I(()=>[s(i)&&s(g).length?(n(),l("div",Me,[(n(!0),l(S,null,D(s(g),f=>(n(),l("button",{key:f.id,type:"button",class:"dropdown-item",onClick:H=>$(f.id)},[e("span",{class:"tag-preview",style:F({backgroundColor:f.color})},[f.emoji?(n(),l("span",he,p(f.emoji),1)):b("",!0),x(" "+p(f.name),1)],4)],8,Ve))),128))])):b("",!0)]),_:1})],512))}}),ie=Object.assign(z(Se,[["__scopeId","data-v-164a3375"]]),{__name:"TagSelector"}),De={class:"idea-card"},Ee={class:"card-actions"},Be={class:"idea-content"},Oe={class:"idea-footer"},Le={class:"idea-tags"},Ne=["onClick"],Fe={key:0,class:"tag-emoji"},Ue={class:"idea-date"},Re=G({__name:"IdeaCard",props:{idea:{},tags:{}},emits:["delete","edit","tag-click"],setup(y,{emit:C}){const v=y,d=C,{getTagsForIdea:i}=le(),u=h(()=>i(v.idea)),g=h(()=>new Date(v.idea.createdAt).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric"}));return(T,$)=>(n(),l("div",De,[e("div",Ee,[e("button",{class:"edit-btn",onClick:$[0]||($[0]=r=>d("edit",y.idea.id)),title:"Bewerken"}," âœŽ "),e("button",{class:"delete-btn",onClick:$[1]||($[1]=r=>d("delete",y.idea.id)),title:"Verwijderen"}," Ã— ")]),e("p",Be,p(y.idea.content),1),e("div",Oe,[e("div",Le,[(n(!0),l(S,null,D(s(u),r=>(n(),l("button",{key:r.id,class:"idea-tag",style:F({backgroundColor:r.color}),onClick:t=>d("tag-click",r.id)},[r.emoji?(n(),l("span",Fe,p(r.emoji),1)):b("",!0),x(" "+p(r.name),1)],12,Ne))),128))]),e("span",Ue,p(s(g)),1)])]))}}),Ge=Object.assign(z(Re,[["__scopeId","data-v-02ae9117"]]),{__name:"IdeaCard"}),ze={class:"modal"},Ae={class:"form-group"},Je={class:"label"},We={class:"char-count"},Ke={class:"form-group"},Pe={class:"color-grid"},qe=["onClick"],He={key:0,class:"check"},Qe={class:"form-group"},Xe={class:"emoji-section"},Ye={class:"emoji-suggestions"},Ze=["onClick"],et={class:"form-group"},tt={class:"preview"},st={key:0,class:"tag-emoji"},nt=["disabled"],ot=G({__name:"TagCreateModal",emits:["close","create"],setup(y,{emit:C}){const v=C,d=k(""),i=k(X[0]),u=k(""),g=["âœ¨","ðŸ’¡","â¤ï¸","â­","ðŸŽ¯","ðŸ“","ðŸŽ¨","ðŸŒ¸","ðŸ¦‹","ðŸŒ™","â˜€ï¸","ðŸ€"];function T(){d.value.trim()&&(v("create",d.value,i.value,u.value||void 0),d.value="",i.value=X[0],u.value="")}function $(r){u.value=u.value===r?"":r}return(r,t)=>(n(),V(K,{to:"body"},[e("div",{class:"modal-overlay",onClick:t[3]||(t[3]=E(o=>v("close"),["self"]))},[e("div",ze,[e("button",{class:"close-btn",onClick:t[0]||(t[0]=o=>v("close"))},"Ã—"),t[8]||(t[8]=e("h2",{class:"modal-title"},"Nieuwe Tag Maken",-1)),e("form",{onSubmit:E(T,["prevent"]),class:"modal-form"},[e("div",Ae,[e("label",Je,[t[4]||(t[4]=x("Tag naam ",-1)),e("span",We,p(s(d).length)+"/25",1)]),P(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>R(d)?d.value=o:null),type:"text",class:"input",placeholder:"bijv. recepten, dromen, doelen...",maxlength:"25",autofocus:""},null,512),[[q,s(d)]])]),e("div",Ke,[t[5]||(t[5]=e("label",{class:"label"},"Kleur",-1)),e("div",Pe,[(n(!0),l(S,null,D(s(X),o=>(n(),l("button",{key:o,type:"button",class:Y(["color-option",{selected:s(i)===o}]),style:F({backgroundColor:o}),onClick:c=>i.value=o},[s(i)===o?(n(),l("span",He,"âœ“")):b("",!0)],14,qe))),128))])]),e("div",Qe,[t[6]||(t[6]=e("label",{class:"label"},"Emoji (optioneel)",-1)),e("div",Xe,[P(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>R(u)?u.value=o:null),type:"text",class:"emoji-input",placeholder:"",maxlength:"2"},null,512),[[q,s(u)]]),e("div",Ye,[(n(),l(S,null,D(g,o=>e("button",{key:o,type:"button",class:Y(["emoji-option",{selected:s(u)===o}]),onClick:c=>$(o)},p(o),11,Ze)),64))])])]),e("div",et,[t[7]||(t[7]=e("label",{class:"label"},"Voorbeeld",-1)),e("div",tt,[e("span",{class:"tag-preview",style:F({backgroundColor:s(i)})},[s(u)?(n(),l("span",st,p(s(u)),1)):b("",!0),x(" "+p(s(d)||"tag naam"),1)],4)])]),e("button",{type:"submit",class:"submit-btn",disabled:!s(d).trim()}," Tag Maken ",8,nt)],32)])])]))}}),at=Object.assign(z(ot,[["__scopeId","data-v-0c06fcec"]]),{__name:"TagCreateModal"}),lt={class:"modal"},it={key:0,class:"tags-list"},dt={class:"tag-info"},ut={key:0,class:"tag-emoji"},rt=["onClick"],ct={key:1,class:"empty-state"},mt={class:"confirm-modal"},vt={class:"confirm-text"},gt={class:"confirm-actions"},pt=G({__name:"TagManageModal",props:{tags:{}},emits:["close","delete"],setup(y,{emit:C}){const v=y,d=C,i=k(null),u=h(()=>i.value&&v.tags.find(t=>t.id===i.value)?.name||"");function g(r){i.value=r}function T(){i.value=null}function $(r){d("delete",r),i.value=null}return(r,t)=>(n(),V(K,{to:"body"},[e("div",{class:"modal-overlay",onClick:t[2]||(t[2]=E(o=>d("close"),["self"]))},[e("div",lt,[e("button",{class:"close-btn",onClick:t[0]||(t[0]=o=>d("close"))},"Ã—"),t[4]||(t[4]=e("h2",{class:"modal-title"},"Tags Beheren",-1)),y.tags.length?(n(),l("div",it,[(n(!0),l(S,null,D(y.tags,o=>(n(),l("div",{key:o.id,class:"tag-item"},[e("div",dt,[e("span",{class:"tag-preview",style:F({backgroundColor:o.color})},[o.emoji?(n(),l("span",ut,p(o.emoji),1)):b("",!0),x(" "+p(o.name),1)],4)]),e("button",{class:"delete-btn",onClick:c=>g(o.id),title:"Tag verwijderen"}," Ã— ",8,rt)]))),128))])):(n(),l("div",ct,[...t[3]||(t[3]=[e("p",null,"Nog geen tags. Maak er een aan bij het toevoegen van een idee!",-1)])])),(n(),V(K,{to:"body"},[w(N,{name:"fade"},{default:I(()=>[s(i)?(n(),l("div",{key:0,class:"confirm-overlay",onClick:E(T,["self"])},[e("div",mt,[e("p",vt,' Tag "'+p(s(u))+'" verwijderen? ',1),e("div",gt,[e("button",{class:"confirm-no",onClick:T},"Nee"),e("button",{class:"confirm-yes",onClick:t[1]||(t[1]=o=>$(s(i)))},"Ja, verwijderen")])])])):b("",!0)]),_:1})]))])])]))}}),ft=Object.assign(z(pt,[["__scopeId","data-v-4fd7b89b"]]),{__name:"TagManageModal"}),_t={class:"modal"},bt={class:"form-group"},kt={class:"form-group"},yt={class:"form-actions"},$t=["disabled"],Ct=G({__name:"IdeaEditModal",props:{idea:{},tags:{}},emits:["close","save","create-tag","manage-tags"],setup(y,{expose:C,emit:v}){const d=y,i=v,u=k(d.idea.content),g=k([...d.idea.tagIds]);function T(){u.value.trim()&&i("save",d.idea.id,u.value,g.value)}function $(r){g.value.includes(r)||g.value.push(r)}return C({addTagId:$}),(r,t)=>{const o=ie;return n(),V(K,{to:"body"},[e("div",{class:"modal-overlay",onClick:t[6]||(t[6]=E(c=>i("close"),["self"]))},[e("div",_t,[e("button",{class:"close-btn",onClick:t[0]||(t[0]=c=>i("close"))},"Ã—"),t[9]||(t[9]=e("h2",{class:"modal-title"},"Idee Bewerken",-1)),e("form",{onSubmit:E(T,["prevent"]),class:"modal-form"},[e("div",bt,[t[7]||(t[7]=e("label",{class:"label"},"Inhoud",-1)),P(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=c=>R(u)?u.value=c:null),class:"textarea",placeholder:"Wat zit er in je hoofd?...",rows:"4",autofocus:""},null,512),[[q,s(u)]])]),e("div",kt,[t[8]||(t[8]=e("label",{class:"label"},"Tags",-1)),w(o,{modelValue:s(g),"onUpdate:modelValue":t[2]||(t[2]=c=>R(g)?g.value=c:null),tags:y.tags,onCreateTag:t[3]||(t[3]=c=>i("create-tag")),onManageTags:t[4]||(t[4]=c=>i("manage-tags"))},null,8,["modelValue","tags"])]),e("div",yt,[e("button",{type:"button",class:"cancel-btn",onClick:t[5]||(t[5]=c=>i("close"))}," Annuleren "),e("button",{type:"submit",class:"save-btn",disabled:!s(u).trim()}," Opslaan ",8,$t)])],32)])])])}}}),Tt=Object.assign(z(Ct,[["__scopeId","data-v-36c83fe4"]]),{__name:"IdeaEditModal"}),jt={key:0,class:"ideas-page"},wt={class:"main"},xt=["disabled"],It={key:0,class:"filter-section"},Mt={class:"filter-tags"},Vt=["onClick"],ht={key:0,class:"tag-emoji"},St={class:"ideas-list"},Dt={key:"loader",class:"loader-container"},Et={key:"content",class:"ideas-content"},Bt={key:0,class:"empty-state"},Ot={key:0},Lt={key:1},Nt=G({__name:"index",setup(y){const{isLoggedIn:C,isLoading:v}=ye(),d=$e();Ce([C,v],([_,a])=>{!a&&!_&&d.push("/login")},{immediate:!0});const{tags:i,isLoading:u,error:g,loadData:T,addIdea:$,updateIdea:r,deleteIdea:t,createTag:o,deleteTag:c,filterByTag:f,getTagById:H,getIdeaById:de,clearError:Z}=le(),B=k(""),M=k([]),j=k(null),A=k(!1),J=k(!1),W=k(!1),U=k(null),Q=k(null),ee=h(()=>U.value?de(U.value):null),te=h(()=>f(j.value)),se=h(()=>j.value?H(j.value):null);async function ue(){if(!B.value.trim())return;await $(B.value,M.value)&&(B.value="",M.value=[])}async function ne(_){const a=j.value===_?null:_;A.value=!0,j.value=a,await new Promise(O=>setTimeout(O,500)),A.value=!1}async function re(){A.value=!0,j.value=null,await new Promise(_=>setTimeout(_,500)),A.value=!1}async function ce(_,a,O){try{const L=await o(_,a,O);L?.id&&(U.value&&Q.value?Q.value.addTagId(L.id):M.value.push(L.id))}catch(L){console.error("Failed to create tag:",L)}J.value=!1}function me(_){M.value=M.value.filter(a=>a!==_),j.value===_&&(j.value=null),c(_)}function ve(){W.value=!0}function ge(_){U.value=_}function pe(_,a,O){r(_,a,O),U.value=null}return oe(()=>{T()}),(_,a)=>{const O=ie,L=Ge,fe=at,_e=ft,be=Tt;return s(C)?(n(),l("div",jt,[a[14]||(a[14]=e("header",{class:"page-header"},[e("h1",{class:"title"},"Memory Box"),e("p",{class:"subtitle"},"Een fijne plek voor je ideetjes")],-1)),e("main",wt,[e("form",{class:"idea-form",onSubmit:E(ue,["prevent"])},[P(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=m=>R(B)?B.value=m:null),class:"idea-textarea",placeholder:"Wat zit er in je hoofd?...",rows:"3"},null,512),[[q,s(B)]]),w(O,{modelValue:s(M),"onUpdate:modelValue":a[1]||(a[1]=m=>R(M)?M.value=m:null),tags:s(i),onCreateTag:a[2]||(a[2]=m=>J.value=!0),onManageTags:ve},null,8,["modelValue","tags"]),e("button",{type:"submit",class:"submit-btn",disabled:!s(B).trim()}," Opslaan in Memory Box ",8,xt),w(N,{name:"fade"},{default:I(()=>[s(g)?(n(),l("div",{key:0,class:"error-message",onClick:a[3]||(a[3]=(...m)=>s(Z)&&s(Z)(...m))},[x(p(s(g))+" ",1),a[9]||(a[9]=e("span",{class:"error-dismiss"},"Ã—",-1))])):b("",!0)]),_:1})],32),w(N,{name:"fade"},{default:I(()=>[s(i).length?(n(),l("div",It,[a[10]||(a[10]=e("span",{class:"filter-label"},"Filter op tag:",-1)),e("div",Mt,[(n(!0),l(S,null,D(s(i),m=>(n(),l("button",{key:m.id,class:Y(["filter-tag",{active:s(j)===m.id}]),style:F(s(j)===m.id?{backgroundColor:m.color}:{}),onClick:Ft=>ne(m.id)},[m.emoji?(n(),l("span",ht,p(m.emoji),1)):b("",!0),x(" "+p(m.name),1)],14,Vt))),128)),w(N,{name:"fade"},{default:I(()=>[s(j)?(n(),l("button",{key:0,class:"clear-filter",onClick:re}," Wissen ")):b("",!0)]),_:1})])])):b("",!0)]),_:1}),e("div",St,[w(N,{name:"fade",mode:"out-in"},{default:I(()=>[s(u)||s(A)?(n(),l("div",Dt,[...a[11]||(a[11]=[e("div",{class:"loader"},null,-1),e("p",{class:"loader-text"},"Laden...",-1)])])):(n(),l("div",Et,[w(ae,{name:"ideas",tag:"div",class:"ideas-grid"},{default:I(()=>[(n(!0),l(S,null,D(s(te),m=>(n(),V(L,{key:m.id,idea:m,tags:s(i),onDelete:s(t),onEdit:ge,onTagClick:ne},null,8,["idea","tags","onDelete"]))),128))]),_:1}),s(te).length?b("",!0):(n(),l("div",Bt,[a[13]||(a[13]=e("div",{class:"empty-icon"},"âœ¨",-1)),s(se)?(n(),l("p",Ot,'Geen ideeÃ«n met tag "'+p(s(se).name)+'"',1)):(n(),l("p",Lt,[...a[12]||(a[12]=[x("Je memory box is leeg.",-1),e("br",null,null,-1),x("Voeg hierboven je eerste idee toe!",-1)])]))]))]))]),_:1})])]),s(J)?(n(),V(fe,{key:0,onClose:a[4]||(a[4]=m=>J.value=!1),onCreate:ce})):b("",!0),s(W)?(n(),V(_e,{key:1,tags:s(i),onClose:a[5]||(a[5]=m=>W.value=!1),onDelete:me},null,8,["tags"])):b("",!0),s(ee)?(n(),V(be,{key:2,ref_key:"editModalRef",ref:Q,idea:s(ee),tags:s(i),onClose:a[6]||(a[6]=m=>U.value=null),onSave:pe,onCreateTag:a[7]||(a[7]=m=>J.value=!0),onManageTags:a[8]||(a[8]=m=>W.value=!0)},null,8,["idea","tags"])):b("",!0)])):b("",!0)}}}),Rt=z(Nt,[["__scopeId","data-v-7ccf01ae"]]);export{Rt as default};
