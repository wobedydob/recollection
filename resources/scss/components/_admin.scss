@use '../variables' as *;
@use '../mixins' as *;

// ==========================================================================
// Admin Page Styles
// ==========================================================================

// Override main-content max-width for admin pages
.main-content:has(.admin-page-wide) {
  max-width: 1000px;
}

// --------------------------------------------------------------------------
// Page Load Animations
// --------------------------------------------------------------------------

@keyframes admin-fade-in {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes admin-scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

// Loader (hidden by default, shown via JS)
.admin-loader {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: $spacing-base;
  padding: $spacing-4xl $spacing-base;

  .loader {
    width: 40px;
    height: 40px;
    border: 3px solid $color-border;
    border-top-color: $color-border-hover;
    border-radius: $radius-circle;
    animation: spin 0.8s linear infinite;
  }

  .loader-text {
    color: $color-text-lighter;
    font-size: 0.95rem;
    margin: 0;
  }
}

// Content hidden until loaded
.admin-content {
  display: none;

  &.loaded {
    display: block;
  }
}

.admin-page {
  animation: admin-fade-in 0.4s ease forwards;
}

.admin-header {
  animation: admin-fade-in 0.4s ease forwards;
}

// Forms scale in from position
.admin-card:has(form),
.admin-card:has(.filter-form) {
  animation: admin-scale-in 0.4s ease forwards;
  animation-delay: 0.1s;
  opacity: 0;
}

// Regular cards slide up
.admin-card:not(:has(form)):not(:has(.filter-form)) {
  animation: admin-fade-in 0.4s ease forwards;
  animation-delay: 0.1s;
  opacity: 0;
}

.stats-grid {
  animation: admin-fade-in 0.4s ease forwards;
  animation-delay: 0.15s;
  opacity: 0;
}

.danger-zone {
  animation: admin-fade-in 0.4s ease forwards;
  animation-delay: 0.2s;
  opacity: 0;
}

// Staggered animation for user rows
.user-row {
  animation: admin-fade-in 0.3s ease forwards;
  opacity: 0;

  @for $i from 1 through 20 {
    &:nth-child(#{$i}) {
      animation-delay: #{0.05 + ($i * 0.03)}s;
    }
  }
}

// Staggered animation for stat cards
.stat-card {
  animation: admin-fade-in 0.3s ease forwards;
  opacity: 0;

  @for $i from 1 through 8 {
    &:nth-child(#{$i}) {
      animation-delay: #{0.1 + ($i * 0.05)}s;
    }
  }
}

// --------------------------------------------------------------------------
// Suggestions Admin Styles
// --------------------------------------------------------------------------

.suggestions-admin-list {
  display: flex;
  flex-direction: column;
  gap: $spacing-base;
}

.suggestion-admin-item {
  background: $color-bg-lighter;
  border-radius: $radius-sm;
  padding: $spacing-base;
  animation: admin-fade-in 0.3s ease forwards;
  opacity: 0;

  @for $i from 1 through 20 {
    &:nth-child(#{$i}) {
      animation-delay: #{0.05 + ($i * 0.03)}s;
    }
  }
}

.suggestion-admin-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: $spacing-sm;
  gap: $spacing-base;
}

.suggestion-admin-user {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
}

.suggestion-admin-actions {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
}

.status-form {
  display: inline-flex;
}

.status-select {
  padding: $spacing-xs $spacing-sm;
  border: 2px solid $color-border;
  border-radius: $radius-xs;
  font-size: $font-size-sm;
  background: $color-bg-white;
  color: $color-text-primary;
  cursor: pointer;

  &:focus {
    outline: none;
    border-color: $color-border-hover;
  }
}

.suggestion-admin-content {
  margin: 0;
  color: $color-text-primary;
  line-height: $line-height-base;
  word-wrap: break-word;
}

// Status indicators for dropdown
.status-indicator {
  width: 0.75rem;
  height: 0.75rem;
  border-radius: $radius-circle;

  &.new {
    background: #f472b6;
  }

  &.reviewed {
    background: #38bdf8;
  }

  &.planned {
    background: #a78bfa;
  }

  &.done {
    background: #4ade80;
  }
}

.admin-page {
  max-width: 900px;
  margin: 0 auto;
  padding: $spacing-2xl;

  &.admin-page-wide {
    max-width: 100%;
  }
}

.admin-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: $spacing-2xl;
  gap: $spacing-base;

  .header-left {
    display: flex;
    flex-direction: column;
    gap: $spacing-sm;
  }

  .header-actions {
    display: flex;
    gap: $spacing-sm;
  }
}

// Admin actions row
.admin-actions {
  display: flex;
  gap: $spacing-sm;
  margin-bottom: $spacing-2xl;
}

// Badge for notification count
.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.25rem;
  height: 1.25rem;
  padding: 0 $spacing-xs;
  background: #ef4444;
  color: white;
  font-size: $font-size-xs;
  font-weight: $font-weight-bold;
  border-radius: $radius-pill;
  margin-left: $spacing-xs;
}

.back-link {
  color: $color-text-muted;
  text-decoration: none;
  font-size: $font-size-sm;
  transition: $transition-fast;

  &:hover {
    color: $color-text-primary;
  }
}

.admin-title {
  font-size: $font-size-xl;
  font-weight: $font-weight-bold;
  background: $gradient-title;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 0;
}

// Stats Grid
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: $spacing-base;
  margin-bottom: $spacing-2xl;
}

.stat-card {
  background: $color-bg-white;
  border-radius: $radius-md;
  padding: $spacing-lg;
  display: flex;
  align-items: center;
  gap: $spacing-base;
  box-shadow: $shadow-sm;
  border: 1px solid $color-border-light;

  .stat-icon {
    font-size: $font-size-2xl;
  }

  .stat-info {
    display: flex;
    flex-direction: column;
  }

  .stat-value {
    font-size: $font-size-xl;
    font-weight: $font-weight-bold;
    color: $color-text-primary;
  }

  .stat-label {
    font-size: $font-size-sm;
    color: $color-text-muted;
  }
}

// Admin Sections
.admin-section {
  background: $color-bg-white;
  border-radius: $radius-md;
  padding: $spacing-xl;
  box-shadow: $shadow-sm;
  border: 1px solid $color-border-light;
  margin-bottom: $spacing-2xl;
}

.admin-card {
  background: $color-bg-white;
  border-radius: $radius-md;
  padding: $spacing-xl;
  box-shadow: $shadow-sm;
  border: 1px solid $color-border-light;
  margin-bottom: $spacing-2xl;
}

// Users List
.users-list {
  display: flex;
  flex-direction: column;
  gap: $spacing-sm;
}

.user-row {
  display: flex;
  align-items: center;
  gap: $spacing-base;
  padding: $spacing-base;
  background: $color-bg-lighter;
  border-radius: $radius-sm;
  transition: $transition-fast;
  text-decoration: none;
  color: inherit;

  &:hover {
    background: $color-bg-hover;
    text-decoration: none;
  }

  &.clickable {
    cursor: pointer;
  }
}

.user-info {
  display: flex;
  align-items: center;
  gap: $spacing-base;
  flex: 1;
  min-width: 0;
}

.user-avatar {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: $radius-circle;
  background: $gradient-avatar;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: $font-weight-bold;
  color: $color-bg-white;
  font-size: $font-size-sm;
  flex-shrink: 0;

  &.large {
    width: 4rem;
    height: 4rem;
    font-size: $font-size-lg;
  }
}

.user-details {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.user-name {
  font-weight: $font-weight-medium;
  color: $color-text-primary;
  margin: 0;
}

.user-email {
  font-size: $font-size-sm;
  color: $color-text-muted;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.user-stats {
  display: flex;
  gap: $spacing-base;

  .stat {
    font-size: $font-size-sm;
    color: $color-text-muted;
  }
}

.user-meta {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: $spacing-xs;
}

.user-role {
  font-size: $font-size-xs;
  padding: $spacing-xs $spacing-sm;
  border-radius: $radius-pill;
  font-weight: $font-weight-medium;
  text-transform: uppercase;

  &.user {
    background: #e0f2fe;
    color: #0369a1;
  }

  &.admin {
    background: #fce7f3;
    color: #be185d;
  }
}

.user-date {
  font-size: $font-size-xs;
  color: $color-text-light;
}

.user-joined {
  font-size: $font-size-sm;
  color: $color-text-light;
}

.user-actions {
  display: flex;
  gap: $spacing-sm;
}

// User Profile Header (Show page)
.user-profile-header {
  display: flex;
  align-items: center;
  gap: $spacing-lg;
}

.user-profile-info {
  flex: 1;
}

.user-profile-name {
  font-size: $font-size-lg;
  font-weight: $font-weight-bold;
  color: $color-text-primary;
  margin: 0 0 $spacing-xs;
}

.user-profile-email {
  font-size: $font-size-base;
  color: $color-text-muted;
  margin: 0 0 $spacing-sm;
}

.user-profile-meta {
  display: flex;
  align-items: center;
  gap: $spacing-base;
}

// Content Navigation Grid (Show page)
.content-nav-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: $spacing-base;
  margin-bottom: $spacing-2xl;
}

.content-nav-card {
  display: flex;
  align-items: center;
  gap: $spacing-base;
  padding: $spacing-lg;
  background: $color-bg-white;
  border-radius: $radius-md;
  box-shadow: $shadow-sm;
  border: 1px solid $color-border-light;
  text-decoration: none;
  color: inherit;
  transition: $transition-fast;

  &:hover {
    transform: translateY(-2px);
    box-shadow: $shadow-md;
    text-decoration: none;
  }
}

.content-nav-icon {
  font-size: $font-size-2xl;
}

.content-nav-info {
  flex: 1;
}

.content-nav-title {
  font-size: $font-size-base;
  font-weight: $font-weight-semibold;
  color: $color-text-primary;
  margin: 0 0 $spacing-xs;
}

.content-nav-desc {
  font-size: $font-size-sm;
  color: $color-text-muted;
  margin: 0;
}

.content-nav-arrow {
  font-size: $font-size-lg;
  color: $color-text-light;
}

// User Header (Edit page)
.user-header {
  display: flex;
  align-items: center;
  gap: $spacing-lg;
  margin-bottom: $spacing-xl;
  padding-bottom: $spacing-xl;
  border-bottom: 1px solid $color-border-light;
}

.user-header-info {
  .user-name {
    font-size: $font-size-lg;
    margin-bottom: $spacing-xs;
  }

  .user-email {
    margin-bottom: $spacing-xs;
  }

  .user-meta {
    font-size: $font-size-sm;
    color: $color-text-light;
  }
}

.user-stats-row {
  display: flex;
  gap: $spacing-2xl;
  margin-bottom: $spacing-xl;
  padding-bottom: $spacing-xl;
  border-bottom: 1px solid $color-border-light;

  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .stat-value {
    font-size: $font-size-xl;
    font-weight: $font-weight-bold;
    color: $color-text-primary;
  }

  .stat-label {
    font-size: $font-size-sm;
    color: $color-text-muted;
  }
}

// Filter Form
.filter-form {
  margin-bottom: $spacing-xl;

  .filter-tags {
    .filter-tag {
      .status-indicator {
        flex-shrink: 0;
      }

      &.active {
        // Pink theme (default)
        background: #fce7f3;
        border-color: #f9a8d4;
        color: #be185d;

        // Blue theme
        [data-color="blue"] & {
          background: #e0f2fe;
          border-color: #7dd3fc;
          color: #0369a1;
        }

        // Green theme
        [data-color="green"] & {
          background: #dcfce7;
          border-color: #86efac;
          color: #166534;
        }
      }
    }
  }
}

.filter-row {
  display: flex;
  gap: $spacing-sm;
  flex-wrap: wrap;

  .input {
    flex: 1;
    min-width: 150px;
  }

  .select {
    flex: 0 0 auto;
    width: auto;
    min-width: 140px;
  }
}

// Custom Select Dropdown
.custom-select {
  position: relative;
  min-width: 140px;

  &.custom-select-small {
    min-width: 110px;

    .custom-select-trigger {
      padding: $spacing-xs $spacing-sm;
      font-size: $font-size-sm;
      border-width: 1px;
    }

    .custom-select-dropdown {
      border-width: 1px;
    }

    .custom-select-option {
      padding: $spacing-xs $spacing-sm;
      font-size: $font-size-sm;
    }

    .custom-select-arrow {
      font-size: 0.5rem;
    }
  }
}

.custom-select-trigger {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: $spacing-sm;
  width: 100%;
  padding: 0.875rem $spacing-base;
  background: $color-bg-white;
  border: 2px solid $color-border;
  border-radius: $radius-sm;
  font-size: $font-size-base;
  color: $color-text-primary;
  cursor: pointer;
  transition: $transition-base;

  &:hover {
    border-color: $color-border-hover;
  }
}

.custom-select-value {
  flex: 1;
  text-align: left;
}

.custom-select-arrow {
  font-size: 0.6rem;
  color: $color-text-lighter;
  transition: transform 0.2s ease;
}

.custom-select-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  margin-top: $spacing-xs;
  background: $color-bg-white;
  border: 2px solid $color-border;
  border-radius: $radius-sm;
  box-shadow: $shadow-md;
  z-index: $z-dropdown;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-5px);
  transition: $transition-fast;

  &.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }
}

.custom-select-option {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  width: 100%;
  padding: $spacing-md $spacing-base;
  background: none;
  border: none;
  font-size: $font-size-base;
  color: $color-text-secondary;
  cursor: pointer;
  transition: $transition-fast;
  text-align: left;

  &:first-child {
    border-radius: $radius-xs $radius-xs 0 0;
  }

  &:last-child {
    border-radius: 0 0 $radius-xs $radius-xs;
  }

  &:hover {
    background: $color-bg-light;
  }

  &.active {
    background: $color-bg-subtle;
    color: $color-text-primary;
    font-weight: $font-weight-medium;
  }
}

.role-indicator {
  width: 0.75rem;
  height: 0.75rem;
  border-radius: $radius-circle;

  &.user {
    background: #7dd3fc;
  }

  &.admin {
    background: #f9a8d4;
  }
}

// Edit Form
.edit-form {
  .form-group {
    margin-bottom: $spacing-lg;
  }

  .form-actions {
    display: flex;
    gap: $spacing-sm;
    margin-top: $spacing-xl;
  }
}

// Content Section
.content-section {
  background: $color-bg-white;
  border-radius: $radius-md;
  padding: $spacing-xl;
  box-shadow: $shadow-sm;
  border: 1px solid $color-border-light;
  margin-bottom: $spacing-xl;

  .section-title {
    margin-bottom: $spacing-lg;
  }
}

.content-list {
  display: flex;
  flex-direction: column;
  gap: $spacing-sm;
}

.content-item {
  display: flex;
  align-items: flex-start;
  gap: $spacing-base;
  padding: $spacing-base;
  background: $color-bg-lighter;
  border-radius: $radius-sm;
}

.content-main {
  flex: 1;
  min-width: 0;
}

.content-text {
  margin: 0 0 $spacing-sm;
  color: $color-text-primary;
  word-wrap: break-word;
}

.content-tags {
  display: flex;
  flex-wrap: wrap;
  gap: $spacing-xs;
  margin-bottom: $spacing-sm;
}

.content-meta {
  font-size: $font-size-sm;
  color: $color-text-muted;
  margin-right: $spacing-base;
}

.content-date {
  font-size: $font-size-xs;
  color: $color-text-light;
}

.tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: $spacing-sm;
}

.admin-tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: $spacing-sm;
}

.admin-tag-form {
  display: inline-flex;
}

// Checklist Items
.checklist-header {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  margin-bottom: $spacing-sm;
}

.checklist-emoji {
  font-size: $font-size-lg;
}

.checklist-name {
  font-weight: $font-weight-semibold;
  color: $color-text-primary;
}

.checklist-items {
  display: flex;
  flex-direction: column;
  gap: $spacing-xs;
  margin-bottom: $spacing-sm;
  padding-left: $spacing-sm;
}

.checklist-item {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  font-size: $font-size-sm;
  color: $color-text-secondary;

  &.completed {
    color: $color-text-light;
    text-decoration: line-through;
  }
}

.checklist-checkbox {
  color: $color-text-muted;
}

.checklist-item-title {
  flex: 1;
}

// Empty Message
.empty-message {
  color: $color-text-muted;
  font-style: italic;
  padding: $spacing-base 0;
}

// Pagination
.pagination-wrapper {
  margin-top: $spacing-xl;
  display: flex;
  justify-content: center;
}

// Impersonation Banner
.impersonation-banner {
  background: var(--color-primary-1);
  color: $color-text-primary;
  padding: $spacing-sm $spacing-base;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: $spacing-base;
  font-size: $font-size-sm;

  form {
    display: inline;
  }

  button {
    background: $color-bg-white;
    border: none;
    padding: $spacing-xs $spacing-sm;
    border-radius: $radius-xs;
    cursor: pointer;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    transition: $transition-fast;

    &:hover {
      background: $color-bg-lighter;
    }
  }
}

// Responsive
@include mobile {
  .admin-page {
    padding: $spacing-base;
  }

  .admin-header {
    flex-direction: column;
  }

  .user-row {
    flex-wrap: wrap;
  }

  .user-stats {
    display: none;
  }

  .user-profile-header {
    flex-direction: column;
    text-align: center;

    .btn {
      width: 100%;
    }
  }

  .user-profile-meta {
    flex-direction: column;
    gap: $spacing-sm;
  }

  .filter-row {
    flex-direction: column;

    .input,
    .select {
      width: 100%;
    }
  }

  .content-nav-grid {
    grid-template-columns: 1fr;
  }
}
